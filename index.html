<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Supervivencia 2D — Mobile</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:,">
</head>
<body>
  <canvas id="game"></canvas>
  <canvas id="minimap" width="200" height="140"></canvas>

  <div id="hud">
  <div class="bar hp"><span></span></div>
  <div class="bar energy"><span></span></div>
  <div class="bar oxygen"><span></span></div>
  <div id="invHUD">—</div>
  <div id="hint">Joystick: mover · Run: sprint · Atk/Use: atacar o colocar · Inv/Build · Fogata · Puerta · Mis · Full</div>
</div>


  <div id="toast">Mobile listo. Tocá la pantalla para habilitar audio.</div>

  <!-- INVENTARIO -->
  <div id="inventory" class="hidden">
    <div class="inv-card">
      <h3>Inventario & Crafteo</h3>

      <div class="inv-grid">
        <div><b>Madera:</b> <span id="woodCount">0</span></div>
        <div><b>Piedra:</b> <span id="stoneCount">0</span></div>
        <div><b>Carne cruda:</b> <span id="rawMeat">0</span></div>
        <div><b>Pescado crudo:</b> <span id="rawFish">0</span></div>
        <div><b>Carne cocida:</b> <span id="cookedMeat">0</span></div>
        <div><b>Pescado cocido:</b> <span id="cookedFish">0</span></div>
        <div><b>Lanza:</b> <span id="spearOwned">no</span></div>
      </div>

      <h4>Equipables (tocar para equipar)</h4>
      <div class="equip-grid">
        <button id="equipSpearTile" class="equip">Lanza</button>
        <button id="equipBowTile" class="equip">Arco</button>
        <button id="equipBoatTile" class="equip">Barco</button>
      </div>

      <div style="margin-top:8px; color:#cfd7ff"><b>Flechas:</b> <span id="arrowCount">0</span></div>

      <h4>Armas</h4>
      <div class="recipes">
        <button id="btnCraftSpear">Craftear Lanza (1 madera)</button>
        <button id="btnEquipSpear">Equipar/Quitar Lanza</button>
        <button id="btnCraftBow">Craftear Arco (2 madera)</button>
        <button id="btnCraftArrows">Craftear 8 Flechas (1 madera)</button>
        <button id="btnEquipBow">Equipar/Quitar Arco</button>
      </div>

      <h4>Navegación</h4>
      <div class="recipes">
        <button id="btnCraftBoat">Craftear Barco (10 madera + 2 piedra)</button>
        <button id="btnEquipBoat">Equipar/Quitar Barco</button>
      </div>

      <h4>Cocina (cerca de fogata)</h4>
      <div class="recipes">
        <button id="btnCookMeat">Cocinar Carne (1 cruda → 1 cocida)</button>
        <button id="btnCookFish">Cocinar Pescado (1 crudo → 1 cocido)</button>
      </div>

      <h4>Consumibles</h4>
      <div class="recipes">
        <button id="btnEatMeat">Comer Carne Cocida (+25 hambre, +10 energía)</button>
        <button id="btnEatFish">Comer Pescado Cocido (+18 hambre, +6 energía)</button>
      </div>

      <h4>Guardado</h4>
      <div class="recipes">
        <button id="btnExport">Exportar guardado (.json)</button>
        <label class="import">Importar guardado<input id="fileImport" type="file" accept=".json"></label>
      </div>

      <div class="tips">Cerrar con <b>I</b> o <b>Esc</b></div>
    </div>
  </div>

  <!-- CONSTRUCCIÓN -->
  <div id="buildPanel" class="hidden">
    <div class="inv-card">
      <h3>Construcción</h3>
      <div class="recipes">
        <button data-build="wall">Pared (2 madera)</button>
        <button data-build="floor">Piso (1 madera)</button>
        <button data-build="roof">Techo (1 madera + 1 piedra)</button>
        <button data-build="door">Puerta (2 madera + 1 piedra)</button>
        <button data-build="trap">Trampa (2 madera + 1 piedra)</button>
        <button data-build="shelter">Refugio (6 madera + 2 piedra)</button>
        <button id="btnExitBuild">Salir (B)</button>
      </div>
      <div class="tips">Click/Toque coloca · B/ESC cierra</div>
    </div>
  </div>

  <!-- Controles táctiles -->
  <div id="mobileControls">
    <div id="joy"><div class="stick"></div></div>
    <div id="btns">
      <button id="btnA">Atk/Use</button>
      <button id="btnRun">Run</button>
      <button id="btnInv">Inv</button>
      <button id="btnBuild">Build</button>
      <button id="btnFire">Fogata</button>
      <button id="btnDoor">Puerta</button>
      <button id="btnMis">Mis.</button>
      <button id="btnFS">Full</button>
    </div>
  </div>
  <div id="rotateOverlay">Girá el teléfono a horizontal</div>

  <!-- Diálogo centrado -->
  <div id="dialog" class="hidden">
    <div class="dialog-box">
      <div id="dialogText" class="dialog-text"></div>
      <button id="dialogClose">Continuar</button>
    </div>
  </div>

  <script src="game.js"></script>
</body>
</html>
