html, body { margin:0; padding:0; height:100%; background:#0c1018; color:#eaeaea; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; overscroll-behavior:none; }
#game { display:block; width:100vw; height:100vh; image-rendering: pixelated; image-rendering: crisp-edges; background:#0c1018; touch-action:none; }
#minimap { position:fixed; right:12px; top:12px; width:200px; height:140px; background:#0a0f1e; border:1px solid #2a3350; border-radius:8px; z-index:2; image-rendering: pixelated; }
#hud { position:fixed; left:12px; top:12px; z-index:3; user-select:none; }
.bar { height:12px; width:280px; background:#202637; border-radius:6px; margin:6px 0; position:relative; box-shadow: inset 0 0 0 1px #343c52; }
.bar > span { position:absolute; left:0; top:0; bottom:0; width:0%; border-radius:6px; display:block; }
.hp > span { background:#e74c3c; } .energy > span { background:#90be6d; } .oxygen > span { background:#577590; }
#invHUD { margin-top:8px; font-size:14px; color:#cfd7ff }

#toast { position:fixed; right:14px; bottom:14px; background:#20283a; padding:10px 14px; border-radius:8px; color:#eaeaea; font-size:13px; opacity:.92; box-shadow:0 8px 24px rgba(0,0,0,.25); z-index:5;}
a { color:#9ad1ff; }

/* Indicaciones centrales */
#hintCenter { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); background:rgba(12,16,24,.85); border:1px solid #2a3350; color:#cfe3ff; padding:10px 14px; border-radius:10px; z-index:8; font-size:16px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
#hintCenter.hidden { display:none; }
#hintCenter.show { animation:hintPop .18s ease-out; }
@keyframes hintPop { from{ transform:translate(-50%,-52%) scale(.98); opacity:0 } to { transform:translate(-50%,-50%) scale(1); opacity:1 } }

/* Overlays de paneles */
#inventory.hidden, #buildPanel.hidden { display:none !important; }
#inventory, #buildPanel { position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; z-index:7; backdrop-filter: blur(2px); }
.inv-card { width: 520px; max-width:95vw; background:#111725; border:1px solid #2a3350; border-radius:12px; padding:16px; box-shadow:0 12px 32px rgba(0,0,0,.35);
  max-height:80vh; overflow:auto; }
.inv-card h3 { margin:0 0 10px 0; font-weight:600; color:#cfe3ff; }
.inv-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:12px; color:#cfd7ff; }
.recipes { display:flex; flex-direction:column; gap:10px; }
.recipes button, .import { background:#1c2440; color:#e8f0ff; border:1px solid #3a4670; border-radius:8px; padding:10px 12px; cursor:pointer; display:inline-block; }
.recipes button:hover, .import:hover { background:#223056; }
.import input { display:none; }
.tips { margin-top:12px; font-size:12px; color:#97a6d6; }

/* Equipables */
.equip-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-bottom:12px; }
.equip { background:#1c2440; color:#e8f0ff; border:1px solid #3a4670; border-radius:8px; padding:10px 12px; cursor:pointer; }
.equip.active { outline:2px solid #9ad1ff; }

/* Mobile controls */
#mobileControls { position: fixed; left:0; right:0; bottom:0; top:0; pointer-events:none; z-index: 9999 !important; }
#joy { position:absolute; left:10px; bottom:10px; width:140px; height:140px; border-radius:50%; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.15); pointer-events:auto; }
#joy .stick { position:absolute; left:50%; top:50%; width:64px; height:64px; margin-left:-32px; margin-top:-32px; border-radius:50%; background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.25); }
#btns { position:absolute; right:10px; bottom:10px; display:grid; grid-template-columns:repeat(2, 100px); gap:10px; pointer-events:auto; }
#btns button { background:#1c2440; color:#e8f0ff; border:1px solid #3a4670; border-radius:12px; padding:12px; font-size:16px; }
#btns button:active { transform: scale(0.98); }

/* Rotate overlay */
#rotateOverlay { position:fixed; inset:0; background:#0c1018; color:#eaeaea; display:none; align-items:center; justify-content:center; z-index:10; font-size:20px; text-align:center; padding:20px; }
@media (orientation:portrait) { #rotateOverlay { display:flex; } }
@media (orientation:landscape) { #rotateOverlay { display:none; } }

@media (max-height: 420px) {
  #hud { transform: scale(0.9); transform-origin: top left; }
  #minimap { transform: scale(0.9); transform-origin: top right; }
}

/* —— Forzar visibilidad móvil y safe areas —— */
#mobileControls { display:block !important; }
#joy, #btns { opacity: 1 !important; }
@supports (padding: env(safe-area-inset-bottom)) {
  #btns { bottom: calc(env(safe-area-inset-bottom) + 10px); right: calc(env(safe-area-inset-right) + 10px); }
  #joy  { bottom: calc(env(safe-area-inset-bottom) + 10px); left:  calc(env(safe-area-inset-left)  + 10px); }
}

/* —— Diálogo centrado —— */
#dialog { position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:9; }
#dialog.show { display:flex; animation:fadeIn .18s ease-out; }
.dialog-box { background:#111725; border:1px solid #2a3350; border-radius:12px; padding:18px; width:520px; max-width:95vw;
  max-height:80vh; overflow:auto; text-align:center; box-shadow:0 16px 36px rgba(0,0,0,.4); transform:scale(.98); animation:pop .2s ease forwards; }
.dialog-text { color:#cfe3ff; font-size:16px; line-height:1.4; margin-bottom:12px; }
@keyframes pop { to { transform:scale(1); } }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
